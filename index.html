<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUSD | Experimental Faucet</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #000; --accent: #fff; --grey: #666; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Space Grotesk', sans-serif; color: var(--accent); }
        #artCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.4; pointer-events: none; }
        .container { position: relative; z-index: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; }
        .card { background: rgba(0, 0, 0, 0.95); backdrop-filter: blur(20px); border: 1px solid #333; padding: 3rem; border-radius: 2px; max-width: 420px; width: 90%; text-align: center; }
        h1 { font-size: 4rem; font-weight: 700; letter-spacing: -4px; margin: 0; line-height: 0.9; }
        .sub-header { color: var(--grey); margin-bottom: 2rem; font-size: 0.75rem; letter-spacing: 4px; font-weight: 300; text-transform: uppercase; }
        .btn { background: var(--accent); color: var(--primary); border: none; padding: 16px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; transition: all 0.3s; width: 100%; margin-top: 10px; }
        .btn:hover { background: #bbb; filter: invert(1); }
        .btn:disabled { background: #111; color: #333; cursor: not-allowed; border: 1px solid #222; }
        .btn-outline { background: transparent; color: var(--accent); border: 1px solid var(--accent); margin-top: 10px; }
        #status { font-size: 0.7rem; margin-top: 1.5rem; color: var(--grey); text-transform: uppercase; letter-spacing: 1px; }
        #walletAddress { font-size: 0.6rem; color: #444; margin-top: 10px; font-family: monospace; overflow-wrap: break-word; }
        .disclaimer { position: absolute; bottom: 20px; font-size: 0.65rem; color: #444; letter-spacing: 1px; text-transform: uppercase; width: 100%; text-align: center; }
        .timer { font-size: 0.8rem; color: #ff3e3e; margin-top: 10px; display: none; font-weight: bold; }
    </style>
</head>
<body>

<canvas id="artCanvas"></canvas>

<div class="container">
    <div class="card">
        <h1>PUSD</h1>
        <div class="sub-header">Westend Testnet Exp.</div>
        
        <button class="btn" id="connectBtn" onclick="initConnection()">INITIALIZE UPLINK</button>
        <p id="walletAddress"></p>

        <div id="actionPanel" style="display:none;">
            <button class="btn" id="pohBtn" onclick="verifyHuman()">Proof of Humanity</button>
            <button class="btn" id="claimBtn" onclick="claim()" disabled style="display:none;">Claim 1.00 PUSD</button>
            <button class="btn btn-outline" id="addTokenBtn" onclick="watchToken()">Add PUSD to Wallet</button>
            <p id="claimTimer" class="timer"></p>
        </div>

        <p id="status">Awaiting Input...</p>
    </div>
</div>

<div class="disclaimer">
    Testnet Environment: Asset-Hub Westend - No Real Value.
</div>

<script>
    // --- CANVAS ART: CERCHI LOGARITMICI ---
    function drawArt() {
        const canvas = document.getElementById('artCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        const count = 30 + Math.floor(Math.random() * 40);
        for (let i = 1; i < count; i++) {
            const posX = Math.random() * canvas.width;
            const posY = Math.random() * canvas.height;
            // Dimensione influenzata logaritmicamente
            const size = (Math.random() * 15) / Math.log(i + 1.1);
            ctx.beginPath();
            ctx.arc(posX, posY, size, 0, Math.PI * 2);
            ctx.fillStyle = "white";
            ctx.fill();
        }
    }
    drawArt();

    // --- LOGICA BLOCKCHAIN ---
    const TARGET_ID = '420420421';
    const TARGET_HEX = '0x19
